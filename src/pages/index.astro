---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import BetaNotice from '../components/BetaNotice.astro';
import VideoDemo from '../components/VideoDemo.astro';
import Features from '../components/Features.astro';
import Roadmap from '../components/Roadmap.astro';
import Lightbox from '../components/Lightbox.astro';
import LanguageSwitcher from '../components/LanguageSwitcher.astro';
import Footer from '../components/Footer.astro';
---

<Layout>
  <script is:inline slot="head">
    // Auto-redirect to German if browser is German and no preference set
    (function() {
      const preferredLang = localStorage.getItem('preferredLang');
      if (!preferredLang) {
        const browserLang = navigator.language.toLowerCase();
        if (browserLang.startsWith('de')) {
          window.location.href = '/de';
        }
      } else if (preferredLang === 'de') {
        window.location.href = '/de';
      }
    })();
  </script>

  <LanguageSwitcher />
  <main>
    <Hero />
    <BetaNotice />
    <VideoDemo />
    <Features />
    <Roadmap />
  </main>
  <Lightbox />
  <Footer />
</Layout>
