---
import { getTranslations } from '../i18n/translations';
import ScreenshotCarousel from './ScreenshotCarousel.astro';
import { config } from '../config';

interface Props {
  lang?: 'en' | 'de';
}

const { lang = 'en' } = Astro.props;
const t = getTranslations(lang).hero;
const isAvailable = config.isProductAvailable;
---

<section class="relative min-h-screen flex items-center overflow-hidden">
  <!-- Background decoration -->
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute top-1/4 right-1/4 w-[600px] h-[600px] bg-gradient-to-br from-[#d63c6b]/20 to-[#6b4c9a]/20 rounded-full blur-3xl animate-pulse-glow"></div>
    <div class="absolute bottom-1/4 left-1/4 w-[400px] h-[400px] bg-gradient-to-tr from-[#F05D23]/10 to-[#d63c6b]/10 rounded-full blur-3xl"></div>
  </div>
  
  <div class="container mx-auto px-6 py-20 relative z-10">
    <div class="grid lg:grid-cols-2 gap-16 items-center">
      <!-- Left: Content -->
      <div class="text-center lg:text-left">
        <!-- Logo -->
        <div class="mb-8 flex justify-center lg:justify-start">
          <img 
            src="/assets/ENDURE_lockup_exact_icon_4k_white_transparent.png" 
            alt="ENDURE Logo" 
            class="h-24 w-auto"
          />
        </div>
        
        <!-- Badge -->
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#2f3340] border border-white/10 mb-6">
          <span class="w-2 h-2 bg-[#F05D23] rounded-full animate-pulse"></span>
          <span class="text-sm text-[#a0a5b5]">{t.badge}</span>
        </div>
        
        <!-- Headline -->
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight">
          <span class="gradient-text">{t.headline1}</span>
          <span class="block mt-2 text-white">{t.headline2}</span>
        </h1>
        
        <!-- Subline -->
        <p class="text-lg md:text-xl text-[#a0a5b5] mb-8 max-w-xl mx-auto lg:mx-0" set:html={t.subline}></p>
        
        {isAvailable ? (
          <!-- CTA Button (when available) -->
          <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mb-6">
            <a id="download-btn" href="#download" class="btn-primary text-lg">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801"/>
              </svg>
              {t.cta}
            </a>
          </div>
          
          <!-- Secondary text -->
          <p class="text-sm text-[#6b7280] flex items-center gap-2 justify-center lg:justify-start">
            <span class="inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            {t.secondary}
          </p>
        ) : (
          <!-- Coming Soon Badge (when not yet available) -->
          <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mb-6">
            <div class="inline-flex items-center gap-3 px-6 py-3 rounded-full bg-gradient-to-r from-[#F05D23]/20 to-[#d63c6b]/20 border border-[#F05D23]/30">
              <span class="w-2 h-2 bg-[#F05D23] rounded-full animate-pulse"></span>
              <span class="text-lg font-medium text-white">{t.comingSoon}</span>
            </div>
          </div>
          
          <!-- Coming soon secondary text -->
          <p class="text-sm text-[#6b7280] flex items-center gap-2 justify-center lg:justify-start">
            {t.comingSoonSecondary}
          </p>
        )}
      </div>
      
      <!-- Right: Screenshot Carousel -->
      <div class="relative">
        <ScreenshotCarousel />
      </div>
    </div>
  </div>
</section>

<script>
  // Track download clicks
  const downloadBtn = document.getElementById('download-btn');
  
  if (downloadBtn) {
    downloadBtn.addEventListener('click', () => {
      // @ts-ignore
      if (typeof gtag !== 'undefined') {
        // @ts-ignore
        gtag('event', 'download_click', {
          'event_category': 'engagement',
          'event_label': 'windows_installer',
          'value': 1
        });
        console.log('Download event tracked');
      }
    });
  }
</script>
